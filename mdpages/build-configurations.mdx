---
title: Build Configurations
---

# [${meta.title}]

---

Build configurations in Chalet control some of the key properties of the build, like the optimization level, debug symbols, sanitizers, and profiling - anything that requires a distinct build, but isn't specific to the project being built.

\\

## [Overview]

In chalet.json, one can use the `defaultConfigurations` to narrow down which of the default build configurations that are allowed in the project. Chalet contains several default build configurations:


```json
"defaultConfigurations": [
   "Release",
   "Debug",
   "RelWithDebInfo",
   "MinSizeRel",
   "RelHighOpt",
   "Profile"
   "DebugSanitize",
   "DebugSanitizeAddress",
   "DebugSanitizeThread",
   "DebugSanitizeMemory",
   "DebugSanitizeLeak",
   "DebugSanitizeUndefined",
   "DebugSanitizeHW",
   "DebugSanitizeHWAddress"
]
```

\

Build configurations themselves are defined with the `configurations` property. This way, one can say "use a handful of the defaults, but define my own `Release` configuration," or possibly "use no defaults, and define my own configurations" altogether. 

An example build configuration is as follows:

```json
"configurations": {
   "Release": {
      "optimizationLevel": "2",
      "debugSymbols": false,
      "interproceduralOptimization": false,
      "enableProfiling": false,
      "sanitize": false
   }
}
```

In each build configuration, these are several available properties.

\\

## [Optimization Level]


The first one is the `optimizationLevel`. It defines the optimization level passed into the compiler, and mostly follows GNU conventions. Thus, the expected values are `0` `1` `2` `3` `debug` `size` and `fast`. If the property is omitted, no optimization level will be used (implying the compiler's default). 

The mapping for these are more or less 1:1:

|       | GCC / Clang | MSVC  |
| ----- | ----------- | ----- |
| 0     | `-O0`       | `/Od` |
| 1     | `-O1`       | `/O1` |
| 2     | `-O2`       | `/O2` |
| 3     | `-O3`       | `/Ox` |
| debug | `-Od`       | `/Od` |
| size  | `-Os`       | `/Os` |
| fast  | `-Ofast`    | `/Ot` |

> Note: To understand each optimization level further, refer to your compiler's documentation.

\\

## [Debug Symbols]

The `debugSymbols` property is a boolean value that determines whether the build will contain symbols required for debugging. In GCC/Clang, this will apply the `-g3` compiler option, which includes everything that `-g` does, along with macro expansion support.

In MSVC, this triggers several compiler option variations that will produce a similar build on Windows machines (and `*.pdb` files).

> Note: Preprocessor definitions such as `_DEBUG` `DEBUG` and `NDEBUG` are **not** automatically defined. You will need to add them per project.

\\

## [Interprocedural Optimization]

TODO

\\

## [Enable Profiling]

TODO

\\

## [Sanitizers]

TODO



\\

## [Default Configurations]

```json
"configurations": {
   "Release": {
      "optimizationLevel": "2",
      "debugSymbols": false,
      "interproceduralOptimization": false,
      "enableProfiling": false,
      "sanitize": false
   },
   "Debug": {
      "optimizationLevel": "0",
      "debugSymbols": true,
      "interproceduralOptimization": false,
      "enableProfiling": false,
      "sanitize": false
   },
   "RelWithDebInfo": {
      "optimizationLevel": "2",
      "debugSymbols": true,
      "interproceduralOptimization": false,
      "enableProfiling": false,
      "sanitize": false
   },
   "MinSizeRel": {
      "optimizationLevel": "size",
      "debugSymbols": false,
      "interproceduralOptimization": false,
      "enableProfiling": false,
      "sanitize": false
   },
   "RelHighOpt": {
      "optimizationLevel": "3",
      "debugSymbols": false,
      "interproceduralOptimization": true,
      "enableProfiling": false,
      "sanitize": false
   },
   "Profile": {
      "optimizationLevel": "0",
      "debugSymbols": true,
      "interproceduralOptimization": false,
      "enableProfiling": true,
      "sanitize": false
   },
   "DebugSanitize": {
      // Debug
      "sanitize": [
         "address",
         "undefined",
         "leak",
      ]
   },
   "DebugSanitizeAddress": {
      // Debug
      "sanitize": "address"
   },
   "DebugSanitizeThread": {
      // Debug
      "sanitize": "thread"
   },
   "DebugSanitizeMemory": {
      // Debug
      "sanitize": "memory"
   },
   "DebugSanitizeLeak": {
      // Debug
      "sanitize": "leak"
   },
   "DebugSanitizeUndefined": {
      // Debug
      "sanitize": "undefined"
   },
   "DebugSanitizeHW": {
      // Debug
      "sanitize": [
         "hwaddress",
         "undefined",
         "leak"
      ]
   },
   "DebugSanitizeHWAddress": {
      // (Debug)
      "sanitize": "hwaddress"
   },
}
```

<!-- nav:/cxx-compile-settings:/describing-the-distribution -->
